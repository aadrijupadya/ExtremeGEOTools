{"ast":null,"code":"var _jsxFileName = \"/Users/aadrijupadya/Desktop/ExtremeGEOTools/frontend/src/components/QueryPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport QueryForm from './QueryForm';\nimport { getPricingModels } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction estimateTokensFromText(text) {\n  const chars = (text || '').length;\n  return Math.ceil(chars / 4); // simple heuristic\n}\nfunction QueryPage({\n  onSubmit,\n  onResults,\n  isLoading\n}) {\n  _s();\n  var _draft$engines;\n  const [pricing, setPricing] = useState({\n    models: [],\n    defaults: {\n      input_per_1k: 0.0025,\n      output_per_1k: 0.01\n    }\n  });\n  const [draft, setDraft] = useState({\n    text: '',\n    engines: ['openai']\n  });\n  useEffect(() => {\n    (async () => {\n      const p = await getPricingModels();\n      setPricing(p || {\n        models: [],\n        defaults: {\n          input_per_1k: 0.0025,\n          output_per_1k: 0.01\n        }\n      });\n    })();\n  }, []);\n  const activeModel = useMemo(() => {\n    var _pricing$defaults, _pricing$defaults2;\n    const engines = draft.engines || ['openai'];\n    const engine = engines.includes('openai') ? 'openai' : engines[0] || 'openai';\n    // default model per engine\n    const model = engine === 'perplexity' ? 'sonar' : 'gpt-4o';\n    const m = (pricing.models || []).find(x => x.id === model);\n    return m || {\n      id: model,\n      input_per_1k: ((_pricing$defaults = pricing.defaults) === null || _pricing$defaults === void 0 ? void 0 : _pricing$defaults.input_per_1k) || 0.0025,\n      output_per_1k: ((_pricing$defaults2 = pricing.defaults) === null || _pricing$defaults2 === void 0 ? void 0 : _pricing$defaults2.output_per_1k) || 0.01\n    };\n  }, [draft.engines, pricing]);\n  const estimate = useMemo(() => {\n    const inputTokens = estimateTokensFromText(draft.text || '');\n    const inputCostPer1k = activeModel.input_per_1k || 0.0025;\n    const estimatedCost = inputTokens / 1000.0 * inputCostPer1k;\n    return {\n      inputTokens,\n      estimatedCost\n    };\n  }, [draft.text, activeModel]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'grid',\n      gridTemplateColumns: '1fr 320px',\n      gap: '1rem',\n      alignItems: 'start'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(QueryForm, {\n        onSubmit: onSubmit,\n        onResults: onResults,\n        isLoading: isLoading,\n        onDraftChange: d => setDraft(d)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n      style: {\n        border: '1px solid #ddd',\n        padding: '0.75rem',\n        borderRadius: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginTop: 0\n        },\n        children: \"Live Cost Estimate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 14\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Engine\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 16\n          }, this), \": \", (_draft$engines = draft.engines) !== null && _draft$engines !== void 0 && _draft$engines.includes('perplexity') ? 'perplexity' : 'openai']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Model\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 16\n          }, this), \": \", activeModel.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Input tokens\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 16\n          }, this), \": \", estimate.inputTokens]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Input cost/1K\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 16\n          }, this), \": $\", Number(activeModel.input_per_1k).toFixed(4)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 16\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Estimated cost\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this), \": $\", estimate.estimatedCost.toFixed(6)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#666',\n            marginTop: '0.5rem'\n          },\n          children: \"Output tokens are not estimated. Actual cost is shown after submission.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n_s(QueryPage, \"tI/puRQDxH+SSUoPhFAGjhxESns=\");\n_c = QueryPage;\nexport default QueryPage;\nvar _c;\n$RefreshReg$(_c, \"QueryPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","QueryForm","getPricingModels","jsxDEV","_jsxDEV","estimateTokensFromText","text","chars","length","Math","ceil","QueryPage","onSubmit","onResults","isLoading","_s","_draft$engines","pricing","setPricing","models","defaults","input_per_1k","output_per_1k","draft","setDraft","engines","p","activeModel","_pricing$defaults","_pricing$defaults2","engine","includes","model","m","find","x","id","estimate","inputTokens","inputCostPer1k","estimatedCost","style","display","gridTemplateColumns","gap","alignItems","children","onDraftChange","d","fileName","_jsxFileName","lineNumber","columnNumber","border","padding","borderRadius","marginTop","fontSize","Number","toFixed","color","_c","$RefreshReg$"],"sources":["/Users/aadrijupadya/Desktop/ExtremeGEOTools/frontend/src/components/QueryPage.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport QueryForm from './QueryForm';\nimport { getPricingModels } from '../services/api';\n\nfunction estimateTokensFromText(text) {\n  const chars = (text || '').length;\n  return Math.ceil(chars / 4); // simple heuristic\n}\n\nfunction QueryPage({ onSubmit, onResults, isLoading }) {\n  const [pricing, setPricing] = useState({ models: [], defaults: { input_per_1k: 0.0025, output_per_1k: 0.01 } });\n  const [draft, setDraft] = useState({ text: '', engines: ['openai'] });\n\n  useEffect(() => {\n    (async () => {\n      const p = await getPricingModels();\n      setPricing(p || { models: [], defaults: { input_per_1k: 0.0025, output_per_1k: 0.01 } });\n    })();\n  }, []);\n\n  const activeModel = useMemo(() => {\n    const engines = draft.engines || ['openai'];\n    const engine = engines.includes('openai') ? 'openai' : engines[0] || 'openai';\n    // default model per engine\n    const model = engine === 'perplexity' ? 'sonar' : 'gpt-4o';\n    const m = (pricing.models || []).find(x => x.id === model);\n    return m || { id: model, input_per_1k: pricing.defaults?.input_per_1k || 0.0025, output_per_1k: pricing.defaults?.output_per_1k || 0.01 };\n  }, [draft.engines, pricing]);\n\n  const estimate = useMemo(() => {\n    const inputTokens = estimateTokensFromText(draft.text || '');\n    const inputCostPer1k = activeModel.input_per_1k || 0.0025;\n    const estimatedCost = (inputTokens / 1000.0) * inputCostPer1k;\n    return { inputTokens, estimatedCost };\n  }, [draft.text, activeModel]);\n\n  return (\n    <div style={{ display: 'grid', gridTemplateColumns: '1fr 320px', gap: '1rem', alignItems: 'start' }}>\n      <div>\n        <QueryForm \n          onSubmit={onSubmit} \n          onResults={onResults} \n          isLoading={isLoading}\n          onDraftChange={(d) => setDraft(d)}\n        />\n      </div>\n      <aside style={{ border: '1px solid #ddd', padding: '0.75rem', borderRadius: 8 }}>\n        <h3 style={{ marginTop: 0 }}>Live Cost Estimate</h3>\n        <div style={{ fontSize: 14 }}>\n          <div><strong>Engine</strong>: {draft.engines?.includes('perplexity') ? 'perplexity' : 'openai'}</div>\n          <div><strong>Model</strong>: {activeModel.id}</div>\n          <div><strong>Input tokens</strong>: {estimate.inputTokens}</div>\n          <div><strong>Input cost/1K</strong>: ${Number(activeModel.input_per_1k).toFixed(4)}</div>\n          <hr />\n          <div style={{ fontSize: 16 }}>\n            <strong>Estimated cost</strong>: ${estimate.estimatedCost.toFixed(6)}\n          </div>\n          <p style={{ color: '#666', marginTop: '0.5rem' }}>Output tokens are not estimated. Actual cost is shown after submission.</p>\n        </div>\n      </aside>\n    </div>\n  );\n}\n\nexport default QueryPage;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}